# 小卡拼车系统 - 运行说明

## ✅ 当前状态

项目基础环境已搭建完成，可以启动运行！

## 🚀 快速启动

### 1. 启动后端服务

打开**终端1**，执行：

```bash
cd card-carpool/backend
npm run dev
```

后端将在 `http://localhost:8000` 启动

### 2. 启动前端服务

打开**终端2**，执行：

```bash
cd card-carpool/frontend
npm run dev
```

前端将在 `http://localhost:3000` 启动

### 3. 访问应用

- **前端页面**: http://localhost:3000
- **后端API健康检查**: http://localhost:8000/api/health

## 📋 当前功能状态

### ✅ 已完成
- ✅ 项目结构创建
- ✅ 依赖安装
- ✅ 数据库初始化（SQLite）
- ✅ 后端基础框架（Express + TypeScript）
- ✅ 前端基础框架（Vue 3 + Vite + TypeScript）
- ✅ CORS配置
- ✅ 错误处理中间件
- ✅ 移动端响应式样式基础

### 🚧 待实现
- ⏳ 用户管理功能
- ⏳ 卡组管理功能（US1）
- ⏳ 拼车创建功能（US2）
- ⏳ 挤车竞争机制（US3）
- ⏳ 其他用户故事...

## 🔧 常用命令

### 后端
```bash
cd card-carpool/backend

# 开发模式（热重载）
npm run dev

# 构建生产版本
npm run build

# 运行生产版本
npm start

# 数据库迁移
npm run db:migrate

# 重置数据库（删除并重建）
npm run db:reset
```

### 前端
```bash
cd card-carpool/frontend

# 开发模式（热重载）
npm run dev

# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 📱 移动端测试

### 在手机上测试

1. **确保手机和电脑在同一WiFi网络**

2. **获取电脑的IP地址**：
   ```bash
   # macOS/Linux
   ifconfig | grep "inet " | grep -v 127.0.0.1
   
   # Windows
   ipconfig
   ```

3. **在手机浏览器访问**：
   ```
   http://[你的IP地址]:3000
   ```
   例如：`http://192.168.1.100:3000`

4. **在微信中打开**：
   - 将链接发送到微信（文件传输助手或群聊）
   - 点击链接在微信内置浏览器中打开

## 🐛 故障排查

### 后端无法启动
- 检查端口8000是否被占用
- 确认数据库文件已创建：`card-carpool/backend/data/carpool.db`

### 前端无法启动
- 检查端口3000是否被占用
- 确认依赖已安装：`cd card-carpool/frontend && npm install`

### 数据库问题
- 重置数据库：`cd card-carpool/backend && npm run db:reset`
- 检查数据库文件权限

### CORS错误
- 确认后端`.env`中的`CORS_ORIGIN`配置正确
- 确认前端`.env`中的`VITE_API_BASE_URL`配置正确

## 📝 下一步

项目现在可以运行，但功能还在开发中。接下来将实现：

1. **Phase 2**: 核心基础设施（用户模型、API客户端等）
2. **Phase 3**: 卡组管理功能（US1）
3. **Phase 4**: 拼车创建功能（US2）
4. ... 其他功能

详细任务列表请查看：`specs/004-card-carpool/tasks.md`

---

**提示**: 如果遇到任何问题，请检查：
1. Node.js版本是否>=18.0
2. 依赖是否已正确安装
3. 环境变量是否配置正确
4. 端口是否被占用
